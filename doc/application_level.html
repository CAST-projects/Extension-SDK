

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running code after analyzers &mdash; CAST Extension SDK 1.6.6 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="CAST Extension SDK 1.6.6 documentation" href="index.html"/>
        <link rel="next" title="Exchanging data between analysis level and application level" href="data_exchange.html"/>
        <link rel="prev" title="Running during analysis of an existing analyser" href="analyser_level.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CAST Extension SDK
          

          
          </a>

          
            
            
              <div class="version">
                1.6.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="my_first_plugin.html">Tutorial : My first plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deploying plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html">Creating a plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyser_level.html">Running during analysis of an existing analyser</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Running code after analyzers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#implementing-an-application-level-extension">Implementing An application level extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="#objects">Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#accessing-objects">Accessing objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-note-on-performances">Special note on performances</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#query-inside-loop">Query inside loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#do-not-use-application-search-objects-name-variable">Do not use application.search_objects(name=variable)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#decorating-objects">Decorating objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bookmark">Bookmark</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#links">links</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#accessing-existing-links">Accessing existing links</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decorating-existing-links-with-properties">Decorating existing links with properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validating-dynamic-links">Validating dynamic links</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-links">Creating links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#a-reference-finder">A reference finder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-files">Reading files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-initial-state">Setting up the initial state</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-code-to-be-tested">Running the code to be tested</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asserting-the-results">Asserting the results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-cannot-be-tested-this-way">What cannot be tested this way</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-legacy-tools">Using legacy tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-tools-after-analysis">Running &#8216;tools after analysis&#8217;</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#access-to-infrastructure-and-management">Access to infrastructure and management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#management-schema">Management schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interactive-scripting">Interactive scripting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_exchange.html">Exchanging data between analysis level and application level</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysers_specif.html">Analysers specific events</a></li>
<li class="toctree-l1"><a class="reference internal" href="mainframe.html">Mainframe Analyser specificities</a></li>
<li class="toctree-l1"><a class="reference internal" href="html5.html">HTML5/Javascript Analyser specificities</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_quality_rule.html">Writing quality rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="version_compatibility.html">Features and Bugs per CAIP versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips_and_tricks.html">Tips and tricks</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">CAST Extension SDK</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Running code after analyzers</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="_sources/application_level.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-code-after-analyzers">
<h1>Running code after analyzers<a class="headerlink" href="#running-code-after-analyzers" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is documentation for cast.application version 1.5.27.
This API can be upgraded separately from AIP.
See <a class="reference external" href="https://github.com/CAST-projects/Extension-SDK/tree/master/api/1.5.27">api 1.5.27</a></p>
</div>
<p>After all analysis job have ran some code can be launched on the resulting knowledge base.</p>
<p>During this step, you :</p>
<ul class="simple">
<li>can create new links</li>
<li>can decorate existing objects or links with new properties</li>
<li>can create new violations on objects</li>
<li>has access to all objects and links created by any analyzer</li>
<li>have access to source code</li>
</ul>
<p>See <a class="reference internal" href="overview.html#choosing-level"><em>Choosing between analysis level and application level</em></a> for choosing between the two levels</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>This API is an <a class="reference external" href="https://en.wikipedia.org/wiki/Object-relational_mapping">ORM</a>.</p>
<p>So most of calls will perform a SQL query on the knowledge base.
Thus <strong>classical bad practices</strong> still occurs here :</p>
<ul class="simple">
<li>queries inside loops will destroy performances on large volume</li>
<li>...</li>
</ul>
<p class="last">See <a class="reference internal" href="#performance-notes"><em>Special note on performances</em></a></p>
</div>
<div class="section" id="implementing-an-application-level-extension">
<h2>Implementing An application level extension<a class="headerlink" href="#implementing-an-application-level-extension" title="Permalink to this headline">¶</a></h2>
<p>A plugin can be called at the end of analysis by implementing a subclass of <a class="reference internal" href="#cast.application.ApplicationLevelExtension" title="cast.application.ApplicationLevelExtension"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.ApplicationLevelExtension</span></tt></a> and overriding <a class="reference internal" href="#cast.application.ApplicationLevelExtension.end_application" title="cast.application.ApplicationLevelExtension.end_application"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.ApplicationLevelExtension.end_application()</span></tt></a></p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">cast.application</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="k">class</span> <span class="nc">ExtensionApplication</span><span class="p">(</span><span class="n">cast</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">ApplicationLevelExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">end_application</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">):</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;running code at the end of an application&quot;</span><span class="p">)</span>

        <span class="c"># use application object to access the knowledge base</span>
        <span class="c"># ...</span>
</pre></div>
</div>
<p>It is better to separate code from application level extension from the analyser level extension. They use separate python API and separate process
launching.</p>
<p>A plugin can contain any number of ApplicationLevelExtension, they all will be called back.</p>
<dl class="class">
<dt id="cast.application.ApplicationLevelExtension">
<em class="property">class </em><tt class="descclassname">cast.application.</tt><tt class="descname">ApplicationLevelExtension</tt><a class="headerlink" href="#cast.application.ApplicationLevelExtension" title="Permalink to this definition">¶</a></dt>
<dd><p>Inherit from this class to be consider as an application level extension.</p>
<p>Usage :</p>
<p>class MyExtension(ApplicationLevelExtension):</p>
<blockquote>
<div><dl class="docutils">
<dt>def end_application(self, application):</dt>
<dd>...</dd>
</dl>
</div></blockquote>
<dl class="method">
<dt id="cast.application.ApplicationLevelExtension.end_application">
<tt class="descname">end_application</tt><big>(</big><em>application</em><big>)</big><a class="headerlink" href="#cast.application.ApplicationLevelExtension.end_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the end of application&#8217;s analysis, the second pass to create new links.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
</tbody>
</table>
</dd></dl>

</dd></dl>

<p>Those call backs have the application as context <a class="reference internal" href="code_reference.html#cast.application.Application" title="cast.application.Application"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Application</span></tt></a></p>
</div>
<div class="section" id="objects">
<h2>Objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accessing-objects">
<h3>Accessing objects<a class="headerlink" href="#accessing-objects" title="Permalink to this headline">¶</a></h3>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># iterate on all objects of the application</span>
<span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="c"># do something with the object</span>

<span class="c"># iterate on all java objects of the application</span>
<span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="s">&#39;Java&#39;</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="c"># do something with the object</span>

<span class="c"># iterate on all public java objects of the application</span>
<span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="s">&#39;Java&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_public</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">get_name</span><span class="p">())</span>
    <span class="c"># do something with the object</span>
    <span class="o">...</span>

<span class="c"># iterate on all public java class of the application and load their body comment</span>
<span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="s">&#39;Java&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_internal</span><span class="p">()</span><span class="o">.</span><span class="n">is_class</span><span class="p">()</span><span class="o">.</span><span class="n">is_public</span><span class="p">()</span><span class="o">.</span><span class="n">load_property</span><span class="p">(</span><span class="s">&#39;comment.sourceCodeComment&#39;</span><span class="p">):</span>
    <span class="c"># do something with the object</span>
    <span class="c"># the property is available because we have loaded it</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s">&#39;comment.sourceCodeComment&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Objects can be accessed using <a class="reference internal" href="code_reference.html#cast.application.Application.objects" title="cast.application.Application.objects"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.objects()</span></tt></a>.
This will be the preferred way for querying objects. It returns a  <a class="reference internal" href="code_reference.html#cast.application.ObjectQuery" title="cast.application.ObjectQuery"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.ObjectQuery</span></tt></a> that represent a query on objects.
This query can be refined using <a class="reference external" href="https://en.wikipedia.org/wiki/Method_chaining">method chaining</a>.</p>
<p>Files, with their path loaded can be retrieved using <a class="reference internal" href="code_reference.html#cast.application.Application.get_files" title="cast.application.Application.get_files"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.get_files()</span></tt></a>.</p>
<p>Objects from the applications will all be of one of the classes :</p>
<ul class="simple">
<li><a class="reference internal" href="code_reference.html#cast.application.Object" title="cast.application.Object"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Object</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.File" title="cast.application.File"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.File</span></tt></a></li>
</ul>
<p>We provide a high level classification of Objects :</p>
<ul class="simple">
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_file" title="cast.application.Object.is_file"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_file()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_program" title="cast.application.Object.is_program"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_program()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_class" title="cast.application.Object.is_class"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_class()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_executable" title="cast.application.Object.is_executable"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_executable()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_package" title="cast.application.Object.is_package"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_package()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_variable" title="cast.application.Object.is_variable"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_variable()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_table" title="cast.application.Object.is_table"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_table()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_index" title="cast.application.Object.is_index"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_index()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_foreignkey" title="cast.application.Object.is_foreignkey"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_foreignkey()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_form" title="cast.application.Object.is_form"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_form()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_web_service_operation" title="cast.application.Object.is_web_service_operation"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_web_service_operation()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Object.is_dbms" title="cast.application.Object.is_dbms"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.is_dbms()</span></tt></a></li>
</ul>
</div>
<div class="section" id="special-note-on-performances">
<span id="performance-notes"></span><h3>Special note on performances<a class="headerlink" href="#special-note-on-performances" title="Permalink to this headline">¶</a></h3>
<p>Here is a non complete list of bad practices found in code :</p>
<div class="section" id="query-inside-loop">
<h4>Query inside loop<a class="headerlink" href="#query-inside-loop" title="Permalink to this headline">¶</a></h4>
<p>Sample of bad practice:</p>
<div class="highlight-python"><div class="highlight"><pre>for something in application.objects()...:

        for otherthing in application.objects()...:

                # ...
</pre></div>
</div>
<p>This will do a query inside a loop which is killer in term of performance.</p>
<p>You probably should rewrite in the following form:</p>
<div class="highlight-python"><div class="highlight"><pre>my_collection = {}

for something in application.objects()...:

        my_collection[...] = something

for otherthing in application.objects()...:

        # ... use my_collection in a correct way...
</pre></div>
</div>
</div>
<div class="section" id="do-not-use-application-search-objects-name-variable">
<h4>Do not use application.search_objects(name=variable)<a class="headerlink" href="#do-not-use-application-search-objects-name-variable" title="Permalink to this headline">¶</a></h4>
<p>Getting one object per name, whose name is variable will generate one query for each search and will be under-perfomant.</p>
</div>
</div>
<div class="section" id="decorating-objects">
<h3>Decorating objects<a class="headerlink" href="#decorating-objects" title="Permalink to this headline">¶</a></h3>
<p>Exsiting objects can receive new:</p>
<ul class="simple">
<li>properties by using <a class="reference internal" href="code_reference.html#cast.application.Object.save_property" title="cast.application.Object.save_property"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.save_property()</span></tt></a></li>
<li>violations for quality rules by using <a class="reference internal" href="code_reference.html#cast.application.Object.save_violation" title="cast.application.Object.save_violation"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Object.save_violation()</span></tt></a></li>
</ul>
<p>In either case there are a certain number of preliminary steps to do :</p>
<ol class="arabic simple">
<li>having a property applicable for the metamodel type of the object either by :</li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li>reusing an existing property of the metamodel</li>
<li>declare a new property in the metamodel of the plugin</li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>declare the handling of the property by calling <a class="reference internal" href="code_reference.html#cast.application.Application.declare_property_ownership" title="cast.application.Application.declare_property_ownership"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.declare_property_ownership()</span></tt></a></li>
</ol>
<p>Here is a complete sample code, assuming that the property exists:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># here say that we take in charge to put the value of the property &#39;CAST_SQL_Object.version&#39; for</span>
<span class="c"># all objects of type &#39;CAST_MSTSQL_RelationalTable&#39;</span>

<span class="n">application</span><span class="o">.</span><span class="n">declare_property_ownership</span><span class="p">(</span><span class="s">&#39;CAST_SQL_Object.version&#39;</span><span class="p">,[</span><span class="s">&#39;CAST_MSTSQL_RelationalTable&#39;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="s">&#39;CAST_MSTSQL_RelationalTable&#39;</span><span class="p">):</span>
    <span class="n">o</span><span class="o">.</span><span class="n">save_property</span><span class="p">(</span><span class="s">&#39;CAST_SQL_Object.version&#39;</span><span class="p">,</span> <span class="s">&quot;my version&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="bookmark">
<h3>Bookmark<a class="headerlink" href="#bookmark" title="Permalink to this headline">¶</a></h3>
<p>All code positions are represented by objects of class <a class="reference internal" href="code_reference.html#cast.application.Bookmark" title="cast.application.Bookmark"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Bookmark</span></tt></a></p>
<p>Through that class one can access file, file path lines and columns.</p>
</div>
</div>
<div class="section" id="links">
<h2>links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accessing-existing-links">
<h3>Accessing existing links<a class="headerlink" href="#accessing-existing-links" title="Permalink to this headline">¶</a></h3>
<p>Already existing links (those created by analysers) can be accessed with <a class="reference internal" href="code_reference.html#cast.application.Application.links" title="cast.application.Application.links"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.links()</span></tt></a>.</p>
<p>Which creates a <a class="reference internal" href="code_reference.html#cast.application.LinkQuery" title="cast.application.LinkQuery"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.LinkQuery</span></tt></a> retrieving all links.
This query can then be refined using the method chaining pattern API.</p>
<p>Individual link are of the type <a class="reference internal" href="code_reference.html#cast.application.EnlightenLink" title="cast.application.EnlightenLink"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.EnlightenLink</span></tt></a></p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># iterate all links application</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">links</span><span class="p">():</span>
    <span class="o">...</span>

<span class="c"># iterate all call links of application</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">links</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="n">LinkType</span><span class="o">.</span><span class="n">call</span><span class="p">):</span>
    <span class="o">...</span>

<span class="c"># iterate all call links to java objects of application</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">links</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="n">LinkType</span><span class="o">.</span><span class="n">call</span><span class="p">)</span><span class="o">.</span><span class="n">has_callee</span><span class="p">(</span><span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="s">&#39;Java&#39;</span><span class="p">)):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="decorating-existing-links-with-properties">
<h3>Decorating existing links with properties<a class="headerlink" href="#decorating-existing-links-with-properties" title="Permalink to this headline">¶</a></h3>
<p>The same way object can be decorated with new properties, existing links can receive new properties by using <a class="reference internal" href="code_reference.html#cast.application.EnlightenLink.save_property" title="cast.application.EnlightenLink.save_property"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.EnlightenLink.save_property()</span></tt></a>.</p>
<p>The property must have been declared to be handled by using <a class="reference internal" href="code_reference.html#cast.application.Application.declare_property_ownership" title="cast.application.Application.declare_property_ownership"><tt class="xref py py-meth docutils literal"><span class="pre">cast.application.Application.declare_property_ownership()</span></tt></a></p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">links</span> <span class="o">=</span> <span class="n">application</span><span class="o">.</span><span class="n">links</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="n">LinkType</span><span class="o">.</span><span class="n">call</span><span class="p">)</span><span class="o">.</span><span class="n">has_caller</span><span class="p">(</span><span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">(</span><span class="s">&#39;C/C++&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">is_virtual</span><span class="p">())</span>

<span class="n">application</span><span class="o">.</span><span class="n">declare_property_ownership</span><span class="p">(</span><span class="s">&#39;physicalLink.inferenceEngineRequests&#39;</span><span class="p">,</span> <span class="n">links</span><span class="p">)</span>

<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>

    <span class="n">link</span><span class="o">.</span><span class="n">save_property</span><span class="p">(</span><span class="s">&#39;physicalLink.inferenceEngineRequests&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;virtual call&#39;</span><span class="p">])</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;adding property on </span><span class="si">%s</span><span class="s"> --&gt; </span><span class="si">%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">get_caller</span><span class="p">()</span><span class="o">.</span><span class="n">get_qualified_name</span><span class="p">(),</span> <span class="n">link</span><span class="o">.</span><span class="n">get_callee</span><span class="p">()</span><span class="o">.</span><span class="n">get_qualified_name</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="validating-dynamic-links">
<h3>Validating dynamic links<a class="headerlink" href="#validating-dynamic-links" title="Permalink to this headline">¶</a></h3>
<p>Not sure (also called dynamic links) can be marked as validated or ignored using:</p>
<ul class="simple">
<li><a class="reference internal" href="code_reference.html#cast.application.EnlightenLink.validate" title="cast.application.EnlightenLink.validate"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.EnlightenLink.validate()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.EnlightenLink.ignore" title="cast.application.EnlightenLink.ignore"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.EnlightenLink.ignore()</span></tt></a></li>
</ul>
<p>Those methods will flag a link with the corresponding state provided they have been retrieved using <a class="reference internal" href="code_reference.html#cast.application.LinkQuery.is_not_sure" title="cast.application.LinkQuery.is_not_sure"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.LinkQuery.is_not_sure()</span></tt></a>.</p>
<p>Here is an example conversion from DLM Rule Engine to this API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># all so called &#39;dynamic&#39; links</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">links</span><span class="p">()</span><span class="o">.</span><span class="n">is_not_sure</span><span class="p">():</span>

    <span class="n">callee</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">get_callee</span><span class="p">()</span>

    <span class="n">expression</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">expresion</span><span class="p">,</span><span class="n">callee</span><span class="o">.</span><span class="n">get_fullname</span><span class="p">()):</span>

        <span class="n">link</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-links">
<h3>Creating links<a class="headerlink" href="#creating-links" title="Permalink to this headline">¶</a></h3>
<p>New links can be created between two <a class="reference internal" href="code_reference.html#cast.application.Object" title="cast.application.Object"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Object</span></tt></a> by using <a class="reference internal" href="code_reference.html#cast.application.create_link" title="cast.application.create_link"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.create_link()</span></tt></a></p>
<p>Created links can receive properties :</p>
<dl class="method">
<dt id="save_property">
<tt class="descname">save_property</tt><big>(</big><em>prop</em>, <em>value</em><big>)</big><a class="headerlink" href="#save_property" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">No need to declare property ownership for saving property on newly created links.</p>
</div>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">link</span> <span class="o">=</span> <span class="n">create_link</span><span class="p">(</span><span class="s">&#39;callLink&#39;</span><span class="p">,</span> <span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">)</span>
<span class="n">link</span><span class="o">.</span><span class="n">save_property</span><span class="p">(</span><span class="s">&#39;physicalLink.inferenceEngineRequests&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;virtual call&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Created links can be marked as uncertain. They are then eligible to Dynamic Link Manager.</p>
<dl class="method">
<dt id="mark_as_not_sure">
<tt class="descname">mark_as_not_sure</tt><big>(</big><big>)</big><a class="headerlink" href="#mark_as_not_sure" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">link</span> <span class="o">=</span> <span class="n">create_link</span><span class="p">(</span><span class="s">&#39;callLink&#39;</span><span class="p">,</span> <span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">)</span>
<span class="n">link</span><span class="o">.</span><span class="n">mark_as_not_sure</span><span class="p">()</span> <span class="c"># indicate that this link is not certain</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-reference-finder">
<h2>A reference finder<a class="headerlink" href="#a-reference-finder" title="Permalink to this headline">¶</a></h2>
<p>This API includes a simplified reference finder, <a class="reference internal" href="code_reference.html#cast.application.ReferenceFinder" title="cast.application.ReferenceFinder"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.ReferenceFinder</span></tt></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>This API is different from the CAST-MS Reference Finder.</p>
<p>Here this API only &#8216;finds&#8217; references. It creates no object, no links.</p>
<p class="last">Typically :
CAST-MS Reference Finder
&lt;=&gt;
<a class="reference internal" href="code_reference.html#cast.application.Application.get_files" title="cast.application.Application.get_files"><tt class="xref py py-meth docutils literal"><span class="pre">cast.application.Application.get_files()</span></tt></a>
+ <a class="reference internal" href="code_reference.html#cast.application.ReferenceFinder" title="cast.application.ReferenceFinder"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.ReferenceFinder</span></tt></a>
+ <a class="reference internal" href="code_reference.html#cast.application.Application.search_objects" title="cast.application.Application.search_objects"><tt class="xref py py-meth docutils literal"><span class="pre">cast.application.Application.search_objects()</span></tt></a>
+ <a class="reference internal" href="code_reference.html#cast.application.create_link" title="cast.application.create_link"><tt class="xref py py-meth docutils literal"><span class="pre">cast.application.create_link()</span></tt></a></p>
</div>
<p>Basically an object of this class will search one or several patterns in a file, and returns an iterable of <a class="reference internal" href="#cast.application.Reference" title="cast.application.Reference"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Reference</span></tt></a> objects that represent the matches found.</p>
<p>Usage sample</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rf</span> <span class="o">=</span> <span class="n">ReferenceFinder</span><span class="p">()</span>

<span class="c"># declare a pattern named &#39;begin_pattern&#39;</span>
<span class="n">rf</span><span class="o">.</span><span class="n">add_pattern</span><span class="p">(</span><span class="s">&quot;begin_pattern&quot;</span><span class="p">,</span> <span class="n">before</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s">&quot;begin&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c"># one can add other patterns in the same reference finder</span>
<span class="n">rf</span><span class="o">.</span><span class="n">add_pattern</span><span class="p">(</span><span class="s">&quot;end_pattern&quot;</span><span class="p">,</span> <span class="n">before</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s">&quot;end&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>

<span class="c"># we assume here that f is of type cast.application.File</span>
<span class="n">references</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">rf</span><span class="o">.</span><span class="n">find_references_in_file</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
</pre></div>
</div>
<p>This works as follow :</p>
<ol class="arabic simple">
<li>the file is opened</li>
<li>the text is scanned till one of the pattern matches (the first in the declaring order)</li>
<li>apply step 2 on the rest of the text ...</li>
</ol>
<p>The result is represented by the following class. Please not that it creates no object in the knowledge base nor any object.
The &#8216;reaction&#8217; to those patterns found is totally open to developer.</p>
<dl class="class">
<dt id="cast.application.Reference">
<em class="property">class </em><tt class="descclassname">cast.application.</tt><tt class="descname">Reference</tt><a class="headerlink" href="#cast.application.Reference" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference found in the code.</p>
<p><cite>pattern_name</cite> Name of the found pattern</p>
<p><cite>object</cite> object containing the reference</p>
<p><cite>value</cite> the text that was matched</p>
<p><cite>bookmark</cite> <a class="reference internal" href="code_reference.html#cast.application.Bookmark" title="cast.application.Bookmark"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Bookmark</span></tt></a> of the reference found</p>
</dd></dl>

</div>
<div class="section" id="reading-files">
<h2>Reading files<a class="headerlink" href="#reading-files" title="Permalink to this headline">¶</a></h2>
<p>This function will open a file while autodetecting encoding.</p>
<dl class="function">
<dt id="cast.application.open_source_file">
<tt class="descclassname">cast.application.</tt><tt class="descname">open_source_file</tt><big>(</big><em>path</em>, <em>encoding=None</em><big>)</big><a class="headerlink" href="#cast.application.open_source_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent of python open(path) that autotdetects encoding.</p>
<p>handles long path, UNC paths</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>encoding</strong> &#8211; specified encoding (optional)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">file</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>Use the standard python <a class="reference external" href="https://docs.python.org/3/library/logging.html">logging</a> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>

<span class="k">class</span> <span class="nc">ExtensionApplication</span><span class="p">(</span><span class="n">cast</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">ApplicationLevelExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">end_application</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">):</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;hello </span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span>  <span class="s">&#39;world!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New in 1.5.13</p>
</div>
<p>Unit tests can be written the following way.</p>
<ul class="simple">
<li>we create a fake knowledge base</li>
<li>we fill it with some data (objects, links etc...)</li>
<li>then we run our code to be tested</li>
<li>and finally we assert something on the result</li>
</ul>
<p>For example, let&#8217;s say that you have a main.py containing a ApplicationLevelExtension and we want to test its end_application method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">cast_upgrade_1_5_13</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">cast.application.test</span> <span class="kn">import</span> <span class="n">TestKnowledgeBase</span> <span class="c"># @UnresolvedImport</span>
<span class="kn">import</span> <span class="nn">main</span>


<span class="k">class</span> <span class="nc">Test</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_run_extension</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c"># 1. setup the initial state of the knowledge base</span>
        <span class="n">test</span> <span class="o">=</span> <span class="n">TestKnowledgeBase</span><span class="p">()</span>

        <span class="n">project</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">add_project</span><span class="p">(</span><span class="s">&#39;p1&#39;</span><span class="p">,</span> <span class="s">&#39;JV_PROJECT&#39;</span><span class="p">)</span>
        <span class="n">project</span><span class="o">.</span><span class="n">add_object</span><span class="p">(</span><span class="s">&#39;o1&#39;</span><span class="p">,</span> <span class="s">&#39;o1&#39;</span><span class="p">,</span> <span class="s">&#39;JV_CLASS&#39;</span><span class="p">)</span>

        <span class="c"># 2. create an object of the app level extension</span>
        <span class="n">extension</span> <span class="o">=</span> <span class="n">main</span><span class="o">.</span><span class="n">ExtensionApplication</span><span class="p">()</span>

        <span class="c"># 3. run one method on the knowledge base</span>
        <span class="n">application</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">extension</span><span class="o">.</span><span class="n">end_application</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

        <span class="c"># 4. assert something is done on the application</span>
        <span class="o">...</span>
</pre></div>
</div>
<div class="section" id="setting-up-the-initial-state">
<h3>Setting up the initial state<a class="headerlink" href="#setting-up-the-initial-state" title="Permalink to this headline">¶</a></h3>
<p>The main entry point is to create a <a class="reference internal" href="#cast.application.test.TestKnowledgeBase" title="cast.application.test.TestKnowledgeBase"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.test.TestKnowledgeBase</span></tt></a> instance</p>
<blockquote>
<div><dl class="class">
<dt id="cast.application.test.TestKnowledgeBase">
<em class="property">class </em><tt class="descclassname">cast.application.test.</tt><tt class="descname">TestKnowledgeBase</tt><a class="headerlink" href="#cast.application.test.TestKnowledgeBase" title="Permalink to this definition">¶</a></dt>
<dd><p>A fake knowledge base meant for testing.</p>
<p>An application is already created inside.</p>
</dd></dl>

</div></blockquote>
<p>Then to create one or more projects, which are result container for a given technology.</p>
<blockquote>
<div><dl class="method">
<dt id="cast.application.test.TestKnowledgeBase.add_project">
<tt class="descclassname">TestKnowledgeBase.</tt><tt class="descname">add_project</tt><big>(</big><em>name</em>, <em>_type</em><big>)</big><a class="headerlink" href="#cast.application.test.TestKnowledgeBase.add_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a result project to the application.
This is the result of an analysis. &#8216;Almost&#8217; an analysis unit result.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>_type</strong> &#8211; int or str the metamodel type of the project</td>
</tr>
</tbody>
</table>
</dd></dl>

</div></blockquote>
<p>Then CAST objects can be created using :</p>
<dl class="method">
<dt id="cast.application.test.TestObject.add_object">
<tt class="descclassname">TestObject.</tt><tt class="descname">add_object</tt><big>(</big><em>name</em>, <em>fullname</em>, <em>_type</em>, <em>internal=True</em>, <em>keyprop=0</em><big>)</big><a class="headerlink" href="#cast.application.test.TestObject.add_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a child object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>_type</strong> &#8211; metamodel type int or str</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">TestObject</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.test.TestObject.add_file">
<tt class="descclassname">TestObject.</tt><tt class="descname">add_file</tt><big>(</big><em>name</em>, <em>fullname</em>, <em>_type</em>, <em>content=''</em>, <em>internal=True</em>, <em>filename=None</em><big>)</big><a class="headerlink" href="#cast.application.test.TestObject.add_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create child file object with content.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>content</strong> &#8211; str the content of the file</li>
<li><strong>filename</strong> &#8211; str if given this will be the filename generated; or it can be an existing file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>A temporary file is generated with given content.</p>
</dd></dl>

<p>Links can be created using :</p>
<dl class="method">
<dt id="cast.application.test.TestProject.add_link">
<tt class="descclassname">TestProject.</tt><tt class="descname">add_link</tt><big>(</big><em>_type</em>, <em>caller</em>, <em>callee</em><big>)</big><a class="headerlink" href="#cast.application.test.TestProject.add_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new link.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>_type</strong> &#8211; cast.application.LinkType</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><tt class="xref py py-class docutils literal"><span class="pre">TestLink</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Properties can be added on object and link using :</p>
<dl class="method">
<dt id="cast.application.test.TestObject.add_property">
<tt class="descclassname">TestObject.</tt><tt class="descname">add_property</tt><big>(</big><em>prop_name_or_id</em>, <em>value</em><big>)</big><a class="headerlink" href="#cast.application.test.TestObject.add_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a property on an object.</p>
<p>prop_name_or_id is the id of the metamodel property or its fullname, e.g., &#8216;comment.commentBeforeObject&#8217;
property must have INF_TYPE/INF_SUB_TYPE</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prop_name_or_id</strong> &#8211; int or string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.test.TestLink.add_property">
<tt class="descclassname">TestLink.</tt><tt class="descname">add_property</tt><big>(</big><em>prop_name_or_id</em>, <em>value</em><big>)</big><a class="headerlink" href="#cast.application.test.TestLink.add_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a property on a link.</p>
<p>prop_name_or_id is the id of the metamodel property or its fullname, e.g., &#8216;comment.commentBeforeObject&#8217;
property must have INF_TYPE/INF_SUB_TYPE</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prop_name_or_id</strong> &#8211; int or string</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="running-the-code-to-be-tested">
<h3>Running the code to be tested<a class="headerlink" href="#running-the-code-to-be-tested" title="Permalink to this headline">¶</a></h3>
<p>Use the following method:</p>
<dl class="method">
<dt id="cast.application.test.TestKnowledgeBase.run">
<tt class="descclassname">TestKnowledgeBase.</tt><tt class="descname">run</tt><big>(</big><em>method</em>, <em>log_level=None</em><big>)</big><a class="headerlink" href="#cast.application.test.TestKnowledgeBase.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a function, or method having the application as parameter.</p>
</dd></dl>

<p>It accepts either :</p>
<ul class="simple">
<li>a simple function with an application as parameter</li>
<li>or an instance method with an application as parameter</li>
</ul>
<p>Example:</p>
<blockquote>
<div><dl class="docutils">
<dt>def simple_method(application):</dt>
<dd>&#8220;&#8221;&#8221;
:param application: <a class="reference internal" href="code_reference.html#cast.application.Application" title="cast.application.Application"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Application</span></tt></a>
&#8220;&#8221;&#8220;</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="asserting-the-results">
<h3>Asserting the results<a class="headerlink" href="#asserting-the-results" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#cast.application.test.TestKnowledgeBase.run" title="cast.application.test.TestKnowledgeBase.run"><tt class="xref py py-meth docutils literal"><span class="pre">cast.application.test.TestKnowledgeBase.run()</span></tt></a> returns an object of type <a class="reference internal" href="code_reference.html#cast.application.Application" title="cast.application.Application"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Application</span></tt></a> so classical
queries can be done to retreive results.</p>
<p>For example, a basic test of web linker</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">test_01</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="n">test</span> <span class="o">=</span> <span class="n">TestKnowledgeBase</span><span class="p">()</span>

    <span class="c"># a project</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">add_project</span><span class="p">(</span><span class="s">&#39;toto&#39;</span><span class="p">,</span> <span class="s">&#39;JV_PROJECT&#39;</span><span class="p">)</span>

    <span class="c"># server part</span>
    <span class="n">web_service</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">add_object</span><span class="p">(</span><span class="s">&#39;path2/path3/&#39;</span><span class="p">,</span> <span class="s">&#39;path2/path3/&#39;</span><span class="p">,</span> <span class="s">&#39;CAST_JAXRS_GetOperation&#39;</span><span class="p">)</span>

    <span class="c"># client part</span>
    <span class="n">call_to_webservice</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">add_object</span><span class="p">(</span><span class="s">&#39;caller&#39;</span><span class="p">,</span> <span class="s">&#39;call&#39;</span><span class="p">,</span> <span class="s">&#39;CAST_JQuery_GetResourceService&#39;</span><span class="p">)</span>
    <span class="n">call_to_webservice</span><span class="o">.</span><span class="n">add_property</span><span class="p">(</span><span class="s">&#39;CAST_ResourceService.uri&#39;</span><span class="p">,</span> <span class="s">&#39;/path1/path2/path3/&#39;</span><span class="p">)</span>

    <span class="n">extension</span> <span class="o">=</span> <span class="n">ExtensionApplication</span><span class="p">()</span>

    <span class="n">application</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">extension</span><span class="o">.</span><span class="n">end_application</span><span class="p">)</span>

    <span class="n">caller</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">application</span><span class="o">.</span><span class="n">search_objects</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;caller&#39;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">callee</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">application</span><span class="o">.</span><span class="n">search_objects</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;path2/path3/&#39;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">links</span> <span class="o">=</span> <span class="n">application</span><span class="o">.</span><span class="n">links</span><span class="p">()</span><span class="o">.</span><span class="n">has_caller</span><span class="p">([</span><span class="n">caller</span><span class="p">])</span><span class="o">.</span><span class="n">has_callee</span><span class="p">([</span><span class="n">callee</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">links</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="section" id="what-cannot-be-tested-this-way">
<h3>What cannot be tested this way<a class="headerlink" href="#what-cannot-be-tested-this-way" title="Permalink to this headline">¶</a></h3>
<p>The following elements cannot be tested this way :</p>
<ul class="simple">
<li><a class="reference internal" href="code_reference.html#cast.application.Application.sql_tool" title="cast.application.Application.sql_tool"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.sql_tool()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Application.update_cast_knowledge_base" title="cast.application.Application.update_cast_knowledge_base"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.update_cast_knowledge_base()</span></tt></a></li>
</ul>
</div>
</div>
<div class="section" id="using-legacy-tools">
<h2>Using legacy tools<a class="headerlink" href="#using-legacy-tools" title="Permalink to this headline">¶</a></h2>
<p>For the sake of continuity we have kept some of the tools after analysis one can find in CAST-MS.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Those are kept for compatibility. But it is strongly recommended to use programmatic API when possible.</p>
</div>
<div class="section" id="running-tools-after-analysis">
<h3>Running &#8216;tools after analysis&#8217;<a class="headerlink" href="#running-tools-after-analysis" title="Permalink to this headline">¶</a></h3>
<p>The so called &#8216;Cast-MS tools after analysis&#8217; are generally used to create missing links from frameworks.
They can be directly used from inside the plugin by using :</p>
<ul class="simple">
<li><a class="reference internal" href="code_reference.html#cast.application.Application.sql_tool" title="cast.application.Application.sql_tool"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.sql_tool()</span></tt></a></li>
<li><a class="reference internal" href="code_reference.html#cast.application.Application.update_cast_knowledge_base" title="cast.application.Application.update_cast_knowledge_base"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.update_cast_knowledge_base()</span></tt></a></li>
</ul>
<p>Note that it is strongly recommended to use ansi sql code here. The SQL code will be executed in the correct schema so following code is perfectly working:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ExtensionApplication</span><span class="p">(</span><span class="n">cast</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">ApplicationLevelExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">end_application</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">):</span>

        <span class="n">application</span><span class="o">.</span><span class="n">update_cast_knowledge_base</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        insert into CI_LINKS (CALLER_ID, CALLED_ID, LINK_TYPE, ERROR_ID) values (1,1,1,0);</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>So no need to prefix tables with nothing.</p>
</div>
</div>
<div class="section" id="access-to-infrastructure-and-management">
<h2>Access to infrastructure and management<a class="headerlink" href="#access-to-infrastructure-and-management" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This only works on &#8216;combined install&#8217; situation; i.e., the local schema must be named xxx_local and the management xxx_mngt both on the same server.</p>
</div>
<p><a class="reference internal" href="code_reference.html#cast.application.Application.get_application_configuration" title="cast.application.Application.get_application_configuration"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.get_application_configuration()</span></tt></a></p>
<p><a class="reference internal" href="code_reference.html#cast.application.Application.get_managment_base" title="cast.application.Application.get_managment_base"><tt class="xref py py-func docutils literal"><span class="pre">cast.application.Application.get_managment_base()</span></tt></a></p>
</div>
<div class="section" id="management-schema">
<h2>Management schema<a class="headerlink" href="#management-schema" title="Permalink to this headline">¶</a></h2>
<p>Management schema contains the analysis definitions and options.</p>
<dl class="class">
<dt id="cast.application.managment.ManagmentBase">
<em class="property">class </em><tt class="descclassname">cast.application.managment.</tt><tt class="descname">ManagmentBase</tt><big>(</big><em>name</em>, <em>engine=None</em><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase" title="Permalink to this definition">¶</a></dt>
<dd><p>A connection to a management base</p>
<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_applications">
<tt class="descname">get_applications</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_applications" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the applications defined in the base.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of <a class="reference internal" href="#cast.application.managment.Application" title="cast.application.managment.Application"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.managment.Application</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_application">
<tt class="descname">get_application</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to an application by name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; the name of the application</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#cast.application.managment.Application" title="cast.application.managment.Application"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.managment.Application</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_delivery_path">
<tt class="descname">get_delivery_path</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_delivery_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to delivery path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_deploy_path">
<tt class="descname">get_deploy_path</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_deploy_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to deploy path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.execute_query">
<tt class="descname">execute_query</tt><big>(</big><em>query</em><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.execute_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a query on the schema and return a cursor.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_caip_version">
<tt class="descname">get_caip_version</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_caip_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to CAIP version of the schema.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">distutils.version.StrictVersion</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_extensions">
<tt class="descname">get_extensions</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to extensions installed on the schema.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_install_events">
<tt class="descname">get_install_events</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_install_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to install events of the schema.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.ManagmentBase.get_size">
<tt class="descname">get_size</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.ManagmentBase.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the schema size in bytes.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cast.application.managment.Application">
<em class="property">class </em><tt class="descclassname">cast.application.managment.</tt><tt class="descname">Application</tt><a class="headerlink" href="#cast.application.managment.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>The definition of an application in CMS.</p>
<dl class="method">
<dt id="cast.application.managment.Application.get_packages">
<tt class="descname">get_packages</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_packages" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Get the source packages of the application.
:rtype: list of <a class="reference internal" href="#cast.application.managment.Package" title="cast.application.managment.Package"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.managment.Package</span></tt></a></div></blockquote>
<dl class="method">
<dt id="cast.application.managment.Application.get_analysis_units">
<tt class="descname">get_analysis_units</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_analysis_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the analysis units of the application.
:rtype: list of <a class="reference internal" href="#cast.application.managment.AnalysisUnit" title="cast.application.managment.AnalysisUnit"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.managment.AnalysisUnit</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Application.get_modules">
<tt class="descname">get_modules</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to modules definitions
:rtype: list of <a class="reference internal" href="#cast.application.managment.Module" title="cast.application.managment.Module"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.managment.Module</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Application.get_module">
<tt class="descname">get_module</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a module definition
:rtype: <a class="reference internal" href="#cast.application.managment.Module" title="cast.application.managment.Module"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.managment.Module</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Application.get_snapshots">
<tt class="descname">get_snapshots</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_snapshots" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the snapshots of the application.
:rtype: list of <tt class="xref py py-class docutils literal"><span class="pre">cast.application.managment.Snapshot</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Application.get_analysis_service">
<tt class="descname">get_analysis_service</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_analysis_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to analysis service of the application
:rtype: <a class="reference internal" href="#cast.application.KnowledgeBase" title="cast.application.KnowledgeBase"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.KnowledgeBase</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Application.get_dashboard_services">
<tt class="descname">get_dashboard_services</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_dashboard_services" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to analysis service of the application
:rtype: list of <tt class="xref py py-class docutils literal"><span class="pre">cast.application.central.CentralBase</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Application.get_email_to_send_reports">
<tt class="descname">get_email_to_send_reports</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Application.get_email_to_send_reports" title="Permalink to this definition">¶</a></dt>
<dd><p>If configured, returns the email to send reports to.
:rtype: str</p>
</dd></dl>

</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cast.application.managment.Package">
<em class="property">class </em><tt class="descclassname">cast.application.managment.</tt><tt class="descname">Package</tt><big>(</big><em>identifier</em>, <em>name</em>, <em>path</em>, <em>_type</em><big>)</big><a class="headerlink" href="#cast.application.managment.Package" title="Permalink to this definition">¶</a></dt>
<dd><p>A source code package.</p>
<dl class="method">
<dt id="cast.application.managment.Package.get_name">
<tt class="descname">get_name</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Package.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the package</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Package.get_path">
<tt class="descname">get_path</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Package.get_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Deployment path of the package</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.Package.get_type">
<tt class="descname">get_type</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.Package.get_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Package type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">&#8216;bo&#8217;, &#8216;dbudb&#8217;, &#8216;dbzosextract&#8217;, &#8216;file&#8217;, &#8216;formsextract&#8217;, 
&#8216;mfextract&#8217;, &#8216;oracleextract&#8217;, &#8216;sapextract&#8217;, &#8216;sqlserverextract&#8217;,
&#8216;sybaseextract&#8217;, &#8216;uiextract&#8217;</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cast.application.managment.AnalysisUnit">
<em class="property">class </em><tt class="descclassname">cast.application.managment.</tt><tt class="descname">AnalysisUnit</tt><big>(</big><em>mb</em>, <em>identifier</em>, <em>name</em>, <em>technology</em>, <em>application</em>, <em>log</em>, <em>last_execution_date</em>, <em>uuid</em><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit" title="Permalink to this definition">¶</a></dt>
<dd><p>The definition of an analysis unit.</p>
<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.get_technology">
<tt class="descname">get_technology</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.get_technology" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to technology of the AU.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">&#8216;asp&#8217;, &#8216;bo&#8217;, &#8216;cobol&#8217;, &#8216;cpp&#8217;, &#8216;forms&#8217;, &#8216;j2ee&#8217;, &#8216;net&#8217;, &#8216;ora&#8217;, 
&#8216;pb&#8217;, &#8216;sap&#8217;, &#8216;sqlsrv&#8217;, &#8216;syb&#8217;, &#8216;ua&#8217;, &#8216;udb&#8217;, &#8216;ui&#8217;, &#8216;vb&#8217;, &#8216;zos&#8217;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.get_technologies">
<tt class="descname">get_technologies</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.get_technologies" title="Permalink to this definition">¶</a></dt>
<dd><p>Generalized access to the technologies present in that AU. 
For &#8216;core&#8217; technology return a list of one element, e.g., : [&#8216;cpp&#8217;] [&#8216;j2ee&#8217;] 
For Universal Analyzer return a list of selected technologies (there may be several in one UA analysis unit).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.20.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.get_included_selection">
<tt class="descname">get_included_selection</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.get_included_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the pathes/folders selected as included in CMS.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.20.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.get_excluded_selection">
<tt class="descname">get_excluded_selection</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.get_excluded_selection" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the pathes/folders selected as excluded in CMS.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.20.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.get_log">
<tt class="descname">get_log</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.get_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Last analysis log path.</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.get_last_execution_date">
<tt class="descname">get_last_execution_date</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.get_last_execution_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Last execution date.</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.projects">
<tt class="descname">projects</tt><big>(</big><em>kb</em><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.projects" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a KnowledgeBase, gives the associated projects</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.heads">
<tt class="descname">heads</tt><big>(</big><em>kb</em><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.heads" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a KnowledgeBase, gives the associated head.</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.full">
<tt class="descname">full</tt><big>(</big><em>kb</em><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.full" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a KnowledgeBase, gives the associated full content</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.managment.AnalysisUnit.jobs">
<tt class="descname">jobs</tt><big>(</big><em>kb</em><big>)</big><a class="headerlink" href="#cast.application.managment.AnalysisUnit.jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a KnowledgeBase, gives the job associated with analysis unit.</p>
<p>Probably bugged...</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cast.application.managment.Module">
<em class="property">class </em><tt class="descclassname">cast.application.managment.</tt><tt class="descname">Module</tt><big>(</big><em>mb</em>, <em>identifier</em>, <em>name</em>, <em>uuid</em>, <em>application</em><big>)</big><a class="headerlink" href="#cast.application.managment.Module" title="Permalink to this definition">¶</a></dt>
<dd><p>The definition of a module</p>
</dd></dl>

</div>
<div class="section" id="interactive-scripting">
<h2>Interactive scripting<a class="headerlink" href="#interactive-scripting" title="Permalink to this headline">¶</a></h2>
<p>The API can also be used outside plugins, in a script or in an interactive manner.</p>
<p>Basically one has to &#8216;connect&#8217; to a knowledge base and then can retrieve applications, etc..</p>
<dl class="class">
<dt id="cast.application.KnowledgeBase">
<em class="property">class </em><tt class="descclassname">cast.application.</tt><tt class="descname">KnowledgeBase</tt><big>(</big><em>name</em>, <em>engine=None</em><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase" title="Permalink to this definition">¶</a></dt>
<dd><p>A connection to a knowledge base.</p>
<dl class="method">
<dt id="cast.application.KnowledgeBase.get_applications">
<tt class="descname">get_applications</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_applications" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of application of the knowledge base.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of <a class="reference internal" href="code_reference.html#cast.application.Application" title="cast.application.Application"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Application</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.get_application">
<tt class="descname">get_application</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to an application by name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; the name of the application</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="code_reference.html#cast.application.Application" title="cast.application.Application"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.Application</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.get_jobs">
<tt class="descname">get_jobs</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to jobs of the knowledge base.</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.get_events">
<tt class="descname">get_events</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the events of this KnowledgeBase.</p>
<ul class="simple">
<li>AMT Saving</li>
<li>Metrics Calculation (after the analysis)</li>
<li>Update Cast Knowledge Base</li>
<li>Installation, upgrade events</li>
<li>...</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.update_cast_system_views">
<tt class="descname">update_cast_system_views</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.update_cast_system_views" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the Cast System Views.</p>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.execute_query">
<tt class="descname">execute_query</tt><big>(</big><em>query</em><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.execute_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a query on the schema and return a cursor.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.get_caip_version">
<tt class="descname">get_caip_version</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_caip_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to CAIP version of the schema.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">distutils.version.StrictVersion</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.get_extensions">
<tt class="descname">get_extensions</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to extensions installed on the schema.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.get_install_events">
<tt class="descname">get_install_events</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_install_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to install events of the schema.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.5.4.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="cast.application.KnowledgeBase.get_size">
<tt class="descname">get_size</tt><big>(</big><big>)</big><a class="headerlink" href="#cast.application.KnowledgeBase.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the schema size in bytes.</p>
</dd></dl>

</dd></dl>

<p>Example of a script:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">cast.application</span> <span class="kn">import</span> <span class="n">KnowledgeBase</span><span class="p">,</span> <span class="n">LinkType</span>

<span class="n">kb</span> <span class="o">=</span> <span class="n">KnowledgeBase</span><span class="p">(</span><span class="s">&#39;b800_8525_local&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">kb</span><span class="o">.</span><span class="n">get_applications</span><span class="p">())</span>

<span class="n">application</span> <span class="o">=</span> <span class="n">kb</span><span class="o">.</span><span class="n">get_application</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Cpp&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">application</span><span class="o">.</span><span class="n">links</span><span class="p">()</span><span class="o">.</span><span class="n">has_type</span><span class="p">([</span><span class="n">LinkType</span><span class="o">.</span><span class="n">call</span><span class="p">,</span> <span class="n">LinkType</span><span class="o">.</span><span class="n">accessExec</span><span class="p">])</span><span class="o">.</span><span class="n">has_callee</span><span class="p">(</span><span class="n">application</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span><span class="o">.</span><span class="n">is_virtual</span><span class="p">()):</span>

    <span class="k">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
</pre></div>
</div>
<p>Default connection is a css localhost:2280. But any other connection can be passed to the constructor of <a class="reference internal" href="#cast.application.KnowledgeBase" title="cast.application.KnowledgeBase"><tt class="xref py py-class docutils literal"><span class="pre">cast.application.KnowledgeBase</span></tt></a></p>
<dl class="function">
<dt id="cast.application.create_postgres_engine">
<tt class="descclassname">cast.application.</tt><tt class="descname">create_postgres_engine</tt><big>(</big><em>user='operator'</em>, <em>password='CastAIP'</em>, <em>host='localhost'</em>, <em>port=2280</em>, <em>database='postgres'</em><big>)</big><a class="headerlink" href="#cast.application.create_postgres_engine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cast.application.create_oracle_engine">
<tt class="descclassname">cast.application.</tt><tt class="descname">create_oracle_engine</tt><big>(</big><em>user</em>, <em>password</em>, <em>host</em>, <em>port</em>, <em>sid</em>, <em>service</em><big>)</big><a class="headerlink" href="#cast.application.create_oracle_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>sid or service name</p>
</dd></dl>

<dl class="function">
<dt id="cast.application.create_sqlserver_engine">
<tt class="descclassname">cast.application.</tt><tt class="descname">create_sqlserver_engine</tt><big>(</big><em>user</em>, <em>password</em>, <em>server</em>, <em>schema</em>, <em>port</em>, <em>instance</em>, <em>trusted=False</em><big>)</big><a class="headerlink" href="#cast.application.create_sqlserver_engine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">cast.application</span> <span class="kn">import</span> <span class="n">KnowledgeBase</span><span class="p">,</span> <span class="n">LinkType</span><span class="p">,</span> <span class="n">create_oracle_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_oracle_engine</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s">&quot;EXTKB734&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">&quot;EXTKB734&quot;</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s">&quot;JNK2O11&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">1521</span><span class="p">,</span> <span class="n">sid</span><span class="o">=</span><span class="s">&quot;JNK2O11&quot;</span><span class="p">,</span> <span class="n">service</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">kb</span> <span class="o">=</span> <span class="n">KnowledgeBase</span><span class="p">(</span><span class="s">&#39;extkb734&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>

<span class="o">...</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="data_exchange.html" class="btn btn-neutral float-right" title="Exchanging data between analysis level and application level" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="analyser_level.html" class="btn btn-neutral" title="Running during analysis of an existing analyser" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, CAST.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.6.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>